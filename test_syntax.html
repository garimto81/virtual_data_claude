<!DOCTYPE html>
<html>
<head>
    <title>JavaScript 구문 검사</title>
</head>
<body>
    <h1>JavaScript 파일 구문 검사</h1>
    <div id="results"></div>
    
    <script>
        const results = document.getElementById('results');
        
        function testScript(src, name) {
            return new Promise((resolve) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = () => {
                    results.innerHTML += `<p>✅ ${name}: 로드 성공</p>`;
                    resolve(true);
                };
                script.onerror = (e) => {
                    results.innerHTML += `<p>❌ ${name}: 로드 실패 - ${e.message || '구문 에러'}</p>`;
                    console.error(`${name} 에러:`, e);
                    resolve(false);
                };
                document.head.appendChild(script);
            });
        }
        
        async function runTests() {
            // index.html에서 로드하는 순서대로 테스트
            const scripts = [
                ['archive/chip-analysis-module.js?v=3.0.0', 'chip-analysis-module.js'],
                ['archive/table-management-v59.js?v=3.0.0', 'table-management-v59.js'],
                ['archive/action-history.js?v=3.2.5', 'action-history.js'],
                ['archive/double-tap-handler.js?v=3.2.5', 'double-tap-handler.js'],
                ['archive/batch-processor.js?v=3.2.5', 'batch-processor.js'],
                ['archive/mobile-optimizer.js?v=3.2.5', 'mobile-optimizer.js'],
                ['archive/virtual-scroll.js?v=3.2.5', 'virtual-scroll.js'],
                ['archive/offline-storage.js?v=3.2.5', 'offline-storage.js'],
                ['src/js/modal-auto-close.js?v=1.0.0', 'modal-auto-close.js'],
                ['phase4-functions.js?v=4.0.0', 'phase4-functions.js'],
                ['src/js/action-order-manager-v2.js?v=2.0.0', 'action-order-manager-v2.js']
            ];
            
            for (const [src, name] of scripts) {
                results.innerHTML += `<p>🔄 테스트 중: ${name}</p>`;
                await testScript(src, name);
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            results.innerHTML += `<p><strong>✅ 모든 테스트 완료</strong></p>`;
        }
        
        // 전역 에러 핸들러
        window.addEventListener('error', (e) => {
            console.error('전역 에러 발생:', e.error);
            results.innerHTML += `<p>🚨 전역 에러: ${e.filename}:${e.lineno} - ${e.message}</p>`;
        });
        
        runTests();
    </script>
</body>
</html>
# 📋 PRD v5.0 - 포커 테이블 모니터링 시스템

> **Product Requirements Document v5.0**
> **최종 업데이트**: 2025-10-05
> **대상 사용자**: 포커 게임 데이터 매니저

## 📚 관련 문서

- **개발 계획**: [PLAN.md](PLAN.md)
- **상세 설계**: [LLD.md](LLD.md)
- **전략 문서**: [strategies/](strategies/)
  - [프로토타입 우선 전략](strategies/PROTOTYPE_FIRST_STRATEGY.md)
  - [Redis 캐싱 전략](strategies/REDIS_STRATEGY.md)
  - [IndexedDB 전략](strategies/INDEXEDDB_STRATEGY.md)
  - [에이전트 확장 전략](strategies/AGENT_SCALING_STRATEGY.md)
- **아키텍처**: [architecture/](architecture/)
  - [에이전트 아키텍처](architecture/AGENT_ARCHITECTURE.md)
- **가이드**: [guides/](guides/)
  - [README](guides/README.md)
  - [요약](guides/SUMMARY.md)

---

## 🎯 제품 비전

**"키 플레이어가 앉은 테이블의 모든 활동을 실시간 추적하여, 카지노가 게임 데이터를 분석하고 키 플레이어를 효과적으로 관리할 수 있게 한다"**

### 핵심 가치
1. **빠른 테이블 전환** - 키 플레이어 추적 시 1초 이내 이동
2. **자동 핸드 번호** - 수동 입력 제거
3. **두 가지 모드** - 플레이어 관리 ↔ 핸드 기록
4. **로컬 우선** - 오프라인 100% 지원

---

## 👤 사용자 페르소나

### Sarah Kim (포커 데이터 매니저)

```yaml
나이: 28세
근무지: 마닐라 카지노
업무: 키 플레이어 게임 활동 추적

하루 일과:
  09:00 - 출근, 앱 시작
  09:10 - 키 플레이어 리스트 확인 (John Doe, Alice Wang, Bob Smith)
  09:15 - John Doe 추적 시작
         → Ocean Blue 테이블 찾기
         → 테이블 전체 플레이어 8명 로드
         → 플레이어 칩/좌석 정보 업데이트
  09:30 - 핸드 기록 모드로 전환
         → 같은 8명으로 핸드 #127 시작
         → John, Alice(키 플레이어) 액션 집중 관찰
         → 모든 플레이어 액션/카드 기록
  10:30 - Alice가 Dragon Green 테이블로 이동
         → 빠른 테이블 전환 (<1초)
         → 새 테이블 플레이어 6명 로드

주요 불만:
  ❌ 테이블 전환이 느림 (현재 5-10초)
  ❌ 핸드 번호 수동 입력 귀찮음
  ❌ 플레이어 관리 vs 핸드 기록이 분리 안 됨

원하는 기능:
  ✅ 키 플레이어 검색으로 테이블 즉시 찾기
  ✅ 테이블 선택 = 모든 플레이어 로드
  ✅ 명확한 모드 전환 (관리 ↔ 기록)
  ✅ 핸드 번호 자동 증가
```

---

## 🎬 핵심 사용자 시나리오

### 시나리오 1: 키 플레이어 추적 시작

```
1. 앱 시작
   → 최근 테이블 [Ocean Blue, Dragon Green] 표시

2. 키 플레이어 검색
   → "John Doe" 입력
   → Ocean Blue 테이블 자동 선택

3. 테이블 플레이어 관리 모드 진입
   → 모든 플레이어 8명 표시:
      #1 Tom Lee     (일반)  10K
      #2 Sarah Kim   (일반)  15K
      #3 John Doe    🌟 키 플레이어   50K  ← 추적 대상
      #4 Mike Chen   (일반)  8K
      #5 Alice Wang  🌟 키 플레이어   120K ← 보너스 발견
      ... (계속)

4. 플레이어 정보 업데이트
   → John 칩: 50K → 55K
   → Alice 좌석: #5 → #7
   → Tom 새로 추가

시간: < 30초
```

### 시나리오 2: 핸드 기록

```
1. [핸드 기록 모드] 버튼 클릭
   → 같은 8명의 플레이어 표시
   → 핸드 #127 자동 시작
   → 액션 패드 활성화

2. 액션 기록
   → Tom: Call 100
   → Sarah: Fold
   → John 🌟: Raise 500  ← 키 플레이어 강조
   → Mike: Call 500
   → Alice 🌟: Call 500
   ... (계속)

3. 카드 입력 (쇼다운 시)
   → John: A♠ K♠
   → Mike: Q♥ Q♦
   → Alice: J♣ 10♣

4. 핸드 완료
   → John 승리 선택
   → [저장 중...] (1초)
   → 자동으로 핸드 #128 시작

시간: 핸드당 2-5분
```

### 시나리오 3: 다른 테이블로 이동

```
1. Alice가 Dragon Green으로 이동 감지

2. 빠른 전환
   → [Dragon Green] 버튼 클릭
   → 1초 이내 전환

3. 새 테이블 플레이어 로드
   → 6명 표시 (Alice 포함)
   → 플레이어 관리 모드로 시작

시간: < 2초
```

---

## 🗂️ 핵심 기능 요구사항

### F1. 테이블 플레이어 관리 모드

**목적**: 테이블의 모든 플레이어 정보 관리

**기능**:
- ✅ 테이블 선택 시 모든 플레이어 로드
- ✅ 키 플레이어 🌟 강조 표시
- ✅ 플레이어 추가/제거
- ✅ 칩 정보 실시간 수정
- ✅ 좌석 번호 변경
- ✅ 즉시 로컬 저장, 백그라운드 동기화

**화면 구성**:
```
┌─────────────────────────────────────────┐
│ Ocean Blue 테이블 - 플레이어 관리          │
│ 전체 8명 (키 플레이어 2명)                        │
├─────────────────────────────────────────┤
│ #1  Tom Lee       (일반)                │
│     Chips: 10,000  🇰🇷                  │
│     [칩 수정] [좌석] [제거]                │
│                                          │
│ #3  John Doe      🌟 키 플레이어                │
│     Chips: 55,000  🇺🇸                  │
│     [칩 수정] [좌석] [제거]                │
│                                          │
│ #5  Alice Wang    🌟 키 플레이어                │
│     Chips: 120,000 🇨🇳                  │
│     [칩 수정] [좌석] [제거]                │
├─────────────────────────────────────────┤
│ [+ 플레이어 추가]                          │
│ [📝 핸드 기록 모드로 전환]                  │
└─────────────────────────────────────────┘
```

**성능 목표**:
- 테이블 로드: < 1초
- 정보 수정: 즉시 반영 (< 0.3초)

---

### F2. 핸드 기록 모드

**목적**: 게임 핸드의 모든 액션 기록

**기능**:
- ✅ 테이블의 활성 플레이어로 핸드 시작
- ✅ 핸드 번호 자동 증가
- ✅ 모든 플레이어 액션 기록 (폴드, 콜, 레이즈, 올인)
- ✅ 카드 정보 입력
- ✅ 키 플레이어 액션 강조 표시
- ✅ 3초 실행취소 기능
- ✅ 핸드 완료 후 자동으로 다음 핸드 시작

**화면 구성**:
```
┌─────────────────────────────────────────┐
│ Ocean Blue - 핸드 #127                   │
│ 참여 플레이어 8명 (키 플레이어 2명)                │
├─────────────────────────────────────────┤
│ #1  Tom      10K   [액션] [카드]         │
│ #2  Sarah    15K   [액션] [카드]         │
│ #3  John 🌟  55K   [액션] [카드]         │
│ #5  Alice 🌟 120K  [액션] [카드]         │
├─────────────────────────────────────────┤
│ 액션 로그:                                │
│ Tom: Call 100                           │
│ Sarah: Fold                             │
│ 🌟 John: Raise 500  ← 키 플레이어 강조          │
│ Alice: Call 500                         │
├─────────────────────────────────────────┤
│ 현재 차례: #5 Alice (키 플레이어)                │
│ [폴드] [콜] [레이즈] [올인]                │
│                                          │
│ [핸드 완료] [← 플레이어 관리]              │
└─────────────────────────────────────────┘
```

**성능 목표**:
- 핸드 시작: < 0.5초
- 액션 기록: < 0.3초
- 핸드 완료 & 자동 갱신: < 2초

---

### F3. 빠른 테이블 전환

**목적**: 키 플레이어 추적 시 테이블 간 빠른 이동

**기능**:
- ✅ 키 플레이어 이름으로 테이블 검색
- ✅ 최근 테이블 히스토리 (최대 5개)
- ✅ 즐겨찾기 테이블
- ✅ 현재 핸드 자동 저장

**화면 구성**:
```
┌─────────────────────────────────────────┐
│ 🔍 키 플레이어 검색                              │
│ [John Doe___________] → Ocean Blue      │
│                                          │
│ ⭐ 즐겨찾기                               │
│ [Ocean Blue] [Dragon Green]             │
│                                          │
│ 🕒 최근 테이블                            │
│ Ocean Blue (5분 전)                      │
│ Dragon Green (1시간 전)                  │
└─────────────────────────────────────────┘
```

**성능 목표**:
- 키 플레이어 검색: < 0.5초
- 테이블 전환: < 1초

---

## 🚀 비기능 요구사항

### NFR1. 성능

| 작업 | 목표 시간 |
|-----|----------|
| 앱 시작 | < 2초 |
| 테이블 전환 | < 1초 |
| 핸드 시작 | < 0.5초 |
| 액션 기록 | < 0.3초 |
| 핸드 완료 & 갱신 | < 2초 |

### NFR2. 로컬 우선 (Local-First)

- ✅ 모든 작업 로컬에서 즉시 완료
- ✅ 백그라운드 서버 동기화
- ✅ 오프라인 100% 지원
- ✅ 온라인 복구 시 자동 동기화

### NFR3. 데이터 무결성

- ✅ 핸드 번호 중복 방지
- ✅ 플레이어 좌석 중복 방지
- ✅ 트랜잭션 처리 (핸드 저장)

---

## 📊 성공 지표

| KPI | 목표 | 측정 방법 |
|-----|------|----------|
| 평균 테이블 전환 시간 | < 1초 | Analytics |
| 핸드 기록 완료율 | > 95% | 시작 vs 완료 |
| 오프라인 사용 비율 | > 50% | 네트워크 상태 로그 |
| 사용자 만족도 (CSAT) | > 4.5/5 | 설문 |

---

## ⚠️ 제약사항

1. **Google Sheets 제한**
   - 동시 쓰기 제한
   - API 쿼터 제한
   - **해결**: 로컬 우선, 배치 동기화

2. **모바일 환경**
   - 작은 화면
   - 터치 인터페이스
   - **해결**: 44px 최소 터치 영역, 스와이프 제스처

---

## 📝 용어 정의

- **키 플레이어**: 카지노가 집중 관리하는 고액 플레이어
- **테이블**: 포커 게임이 진행되는 물리적 장소
- **핸드**: 포커 게임의 한 라운드
- **액션**: 플레이어의 행동 (폴드, 콜, 레이즈, 올인)
- **모드**: 플레이어 관리 모드 vs 핸드 기록 모드

---

**승인**: _______________
**날짜**: 2025-10-05

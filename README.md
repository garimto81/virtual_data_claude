# 🎰 Virtual Data - Poker Hand Logger

> 실시간 포커 핸드 기록 및 분석 시스템 v3.5.32

## 🌐 접속 링크
- **GitHub 저장소**: https://github.com/garimto81/virtual_data_claude
- **라이브 데모**: https://garimto81.github.io/virtual_data_claude/

## 📋 개요

Google Sheets와 연동되는 웹 기반 포커 핸드 로거입니다. 실시간으로 플레이어의 액션, 칩 변동, 핸드 결과를 기록하고 관리합니다.

### ✨ 주요 기능
- 📊 Google Sheets 실시간 연동
- 👥 플레이어 IN/OUT 상태 관리
- 💰 자동 팟 계산 및 칩 추적
- 🎯 스트릿별 액션 기록
- 📸 카메라 번호 자동 관리
- 🏆 승자 선택 및 칩 분배
- 🌍 국가 정보 매핑 시스템
- 🚀 자동 액션 매핑 시스템 (v2.13.0 신기능)
- ⚡ 모바일 최적화 - 터치/제스처/오프라인 지원 (v3.2.0 신기능)

## 📝 최근 업데이트

### v3.4.24 (2025-09-19) - 액션 순서 절대 순위 시스템 구현
- 🎯 **절대 순위 시스템**: 핸드별로 고정된 액션 순서 관리
- 🔧 **ActionOrderManagerV2**: 플레이어 폴드/올인에도 순서 유지
- 📋 **포지션 자동 할당**: SB, BB, UTG, MP, CO, BTN 자동 계산
- 🔄 **핸드별 독립 처리**: 각 핸드마다 새로운 순서 초기화

### v3.4.23 (2025-09-19) - Ante 체크박스 반응성 개선
- ⚡ **Ante 체크박스 반응성 향상**: renderAll() 제거로 즉각적인 반응
- 🔧 **syncAnteCheckbox 함수 추가**: 체크박스 상태 동기화 중앙화
- 🐞 **loadActionState 개선**: localStorage 로드 시 체크박스 상태 복원

### v3.4.22 (2025-09-19) - Ante 체크박스 상태 유지 버그 수정
- 🐞 **Ante 체크박스 버그 수정**: 새 핸드 갱신 시 Ante 체크박스 상태가 유지되지 않던 문제 해결

### v3.4.21 (2025-09-19) - 성능 최적화 및 코드 모듈화
- 🚀 **모바일 터치 이벤트 최적화**: UnifiedEventHandler 클래스 구현
- 🔧 **이벤트 리스너 관리**: EventManager로 메모리 누수 방지
- ⚡ **데이터 중복 처리 개선**: O(n²) → O(n) 성능 10배 향상
- 📁 **코드 모듈화**: src/js 디렉토리 구조 개선
- 📊 **Google Apps Script v66**: 캐싱 및 증분 검사 도입

### v3.4.15 (2025-09-18) - 중복 검사 이중 실행 문제 완전 해결
- 🎯 **직접 호출 방식**: 메인 앱에서 removeDuplicatePlayers(true) 직접 호출
- 🚫 **이중 실행 차단**: runDuplicateCheck 중간 함수 제거로 완전 해결
- 📊 **통합 로그**: 하나의 모달에서 앱 초기화와 중복 검사 순차 진행
- ✅ **UX 개선**: 콘솔 정리 및 사용자 경험 최적화

### v3.4.14 (2025-09-18) - 중복 검사 통합 시도 (실패)
- ❌ **실패**: runDuplicateCheck → removeDuplicatePlayers 이중 호출 구조 유지
- 🔍 **원인**: 호출 체인 단순화 실패로 근본 문제 미해결

### v3.4.13 (2025-09-18) - 중복 검사 로그 모달 스코프 문제 해결
- 🔧 **전역 함수 노출**: window.openLogModal, closeLogModal, logMessage
- 📊 **실시간 표시**: 중복 검사 과정이 로그 모달에 표시됨
- ⏰ **자동 완료**: 검사 완료 후 3초 뒤 모달 자동 닫기

### v3.4.12 (2025-09-18) - 중복 검사 과정 시각화 및 UX 개선
- 📊 **로그 모달 연동**: 중복 검사 과정을 로그 모달에 실시간 표시
- ⏰ **진행 상황 표시**: DuplicateRemover의 모든 단계가 팝업에 표시됨
- 🔄 **자동 완료**: 검사 완료 후 3초 뒤 모달 자동 닫기
- 👁️ **가시성 향상**: 사용자가 중복 검사 진행 상황을 명확히 확인 가능

### v3.4.11 (2025-09-18) - 중앙 버전 관리 시스템 버그 수정
- 🐛 **중요 수정**: APP_VERSION 상수를 v3.4.4에서 v3.4.11로 업데이트
- 🔧 **근본 원인**: index.html 734번째 줄의 하드코딩된 버전 번호 문제 해결
- 🌐 **GitHub Pages**: 이제 올바른 버전이 웹에서 표시됨
- 📊 **버전 일관성**: 모든 버전 참조가 동일하게 통일됨

### v3.4.10 (2025-09-18) - GitHub 저장소 구조 통합 및 간소화
- 📁 **구조 간소화**: 파일들을 루트 레벨로 이동 (virtual_data 서브폴더 제거)
- 🌐 **단순한 URL**: GitHub Pages 경로 단순화
- ✅ **관리 통합**: 하나의 저장소에서 전체 관리
- 🚀 **접속 편의**: garimto81.github.io/virtual_data 단순 경로

### v3.4.9 (2025-09-18) - openCardSelector 함수 전역 접근 문제 해결
- 🔧 **함수 접근성**: openCardSelector를 window 객체에 등록
- ✅ **버그 수정**: ReferenceError: openCardSelector is not defined 해결
- 🎴 **카드 선택**: ActionOrderManager에서 카드 선택 UI 정상 호출

### v3.4.8 (2025-09-18) - JavaScript 파일 경로 버그 수정
- 🔧 **경로 수정**: archive 폴더의 JavaScript 파일 경로 수정
- ✅ **404 에러 해결**: 모든 스크립트 파일 정상 로드
- 📁 **파일 구조**: chip-analysis, table-management 등 archive 폴더 경로 반영

### v3.4.7 (2025-09-18) - 텍스트 카드 입력 UI 완전 제거
- 🎴 **카드 입력 통합**: 텍스트 입력 필드 완전 제거, 비주얼 카드 선택기로 일원화
- 🔧 **버그 수정**: showFeedback 함수 전역 접근 문제 해결
- ♠️ **일관된 UX**: 모든 카드 입력이 동일한 비주얼 선택 UI 사용
- 🚫 **레거시 제거**: promptForBoardCards가 openCardSelector 호출하도록 변경
- ✅ **코드 정리**: saveBoardCards, skipBoardCards 함수 간소화

### v3.4.6 (2025-09-18) - 중복 플레이어 검사 사용자 경험 개선
- 🚀 **백그라운드 검사**: UI 차단 없이 백그라운드에서 조용히 실행
- 📝 **메시지 간소화**: 콘솔 로그 위주로 변경, 사용자 방해 최소화
- ⚡ **빠른 실행**: 페이지 로드 후 즉시 작동, 결과만 짧게 알림
- ✅ **스마트 알림**: 중요한 결과(삭제/오류)만 2초 스낵바로 표시
- 🔇 **조용한 초기화**: "중복 검사 중" 메시지 제거로 사용자 편의성 증대

### v3.4.5 (2025-09-18) - 카드 입력 시스템 통합 및 개선
- 🎯 **카드 입력 통일**: 텍스트 입력 제거, 비주얼 선택 UI로 완전 통일
- ⏩ **스마트 스킵**: 이미 입력된 카드가 있으면 해당 스트릿 자동 스킵
- ✏️ **카드 수정**: 입력된 카드 수정 기능 추가
- ✓ **상태 표시**: 스트릿 버튼에 카드 입력 완료 상태 시각화

### v3.4.4 (2025-09-18) - 중복 필터링 완전 제거로 근본 해결
- 🎯 **핵심 해결**: CSV 로딩 시 중복 필터링을 완전히 제거하여 모든 중복 데이터를 로컬에 유지
- 🔧 **buildTypeFromCsv 수정**: 중복 검사 로직 제거, 모든 플레이어 데이터를 그대로 유지
- 📊 **중복 제거 시스템 독립**: 데이터 로딩과 중복 제거를 완전히 분리
- 🔍 **정확한 중복 검출**: 이제 실제 중복 데이터가 로컬에 유지되어 중복 제거 시스템이 정상 작동
- ⚡ **근본 원인 해결**: 데이터 로딩 시점과 중복 제거 시점의 불일치 문제 해결

### v3.4.3 (2025-09-18) - 로컬 중복 검출 시 실제 삭제 처리 (실패)
- ❌ **실패**: 로컬 데이터에 이미 중복이 없어서 검출 불가
- 🔧 **시도**: buildTypeFromCsv에서 잘못된 중복 필터링 수정
- 📊 **문제**: table+name+seat 기준 체크로도 여전히 로딩 시점에서 필터링 발생
- 🔍 **진단**: 중복 제거 시스템 실행 시점에는 이미 중복이 제거된 상태

### v3.3.7 (2025-09-18) - Google Sheets 원본 데이터 직접 접근
- 🎯 **원본 데이터 접근**: 가공된 로컬 데이터가 아닌 Google Sheets 원본 데이터 직접 가져오기
- 🔍 **진짜 중복 검출**: santa, Villain02, wolfking 등 실제 중복 플레이어 정확히 찾기
- ⚡ **getAllPlayers API**: Apps Script를 통해 시트의 모든 플레이어 데이터 요청
- 🐛 **근본 문제 해결**: 로컬 데이터는 이미 중복 제거된 상태라서 검출 불가능했음

### v3.3.6 (2025-09-18) - 좌석 없는 중복 플레이어 검출 로직 개선
- 🎯 **진짜 중복 발견**: 좌석이 자동 할당된 중복 플레이어 정확히 검출
- 🔍 **이중 검사 방식**: 좌석 유무에 따른 차별화된 중복 검사
- ⚡ **실제 데이터 분석**: 원본 데이터와 가공된 데이터 구분하여 처리
- 🐛 **123명 vs 144명 문제 해결**: 실제 중복 제거로 정확한 데이터 확보

### v3.3.5 (2025-09-18) - 중복 플레이어 데이터 로딩 로직 개선
- 🔍 **데이터 소스 분석**: 모든 가능한 플레이어 데이터 소스 확인
- 📊 **완전한 데이터 수집**: 여러 소스에서 누락된 플레이어 데이터 취합
- 🐛 **123명 vs 144명 불일치 해결**: 전체 플레이어 데이터 정확히 로드
- 📝 **상세 디버깅**: 각 데이터 소스별 플레이어 수 출력

### v3.3.4 (2025-09-18) - 중복 플레이어 제거 모듈 구문 오류 수정
- 🐛 **구문 오류 수정**: duplicate-remover.js 101번째 줄 구문 오류 해결
- 🔧 **모듈 안정성**: 중복 제거 로직 정상 실행 보장
- 🧹 **자동 실행**: 페이지 새로고침 시 중복 플레이어 자동 제거
- 📝 **테스트 강화**: quick_test.js에 중복 제거 테스트 함수 추가

### v3.3.3 (2025-09-17) - 유연한 칩 처리 시스템
- 💰 **칩 초과 허용**: 보유 칩보다 많은 베팅도 가능 (경고만 표시)
- 🔴 **마이너스 칩**: 음수 칩 상태 허용 및 시각적 표시 (빨간색)
- 🎯 **수동 조정 가능**: 칩 수정 기능으로 언제든 조정 가능
- ⚠️ **경고 시스템**: 칩 초과/마이너스 시 경고만 표시하고 진행

### v3.3.2 (2025-09-17) - 칩 초과 베팅 방지 시스템 (deprecated)
- ~~베팅 차단~~: v3.3.3에서 제거됨

### v3.3.1 (2025-09-17) - 칩 초과 베팅 자동 올인 처리 (deprecated)
- ~~자동 올인 변환~~: v3.3.2에서 제거됨

### v3.3.0 (2025-09-17) - 칩 수정 시 중복 플레이어 생성 문제 해결
- 🔧 **updatePlayerChips 개선**: 기존 플레이어 없으면 새로 추가하는 로직 구현
- 🧹 **자동 중복 제거**: 칩 수정 시에도 중복 제거 로직 자동 실행
- 📦 **Apps Script v65**: 칩 수정 관련 모든 중복 문제 해결
- ✅ **문제 해결**: 칩 수정으로 인한 중복 플레이어 생성 완전 방지

### v3.2.9 (2025-09-17) - 중복 제거 아키텍처 개선
- 🗑️ **별도 버튼 제거**: 중복 제거 버튼을 삭제하고 자동 처리로 변경
- ⚡ **일괄 등록 통합**: 일괄 등록 시 마지막에 중복 제거 자동 실행
- 📦 **Apps Script v64**: 중복 제거 로직을 batchUpdatePlayers 끝에서 실행
- 🔄 **사용자 경험 개선**: 별도 액션 없이 자동으로 중복 처리

### v3.2.8 (2025-09-17) - 중복 플레이어 감지 및 제거 시스템
- 🧹 **중복 제거 시스템**: Apps Script v63에 removeDuplicatePlayers() 함수 추가
- 🔄 **자동 중복 제거**: 플레이어 추가/수정 시 자동으로 중복 감지 및 제거
- 🛠️ **프론트엔드 중복 제거**: 관리 모달에 중복 제거 버튼 추가
- 🚫 **자동 등록 제거**: 중복 방지를 위해 자동 플레이어 등록 로직 비활성화
- 🔍 **강화된 검증**: 테이블_플레이어 조합으로 정확한 중복 감지

### v3.2.7 (2025-09-17) - Apps Script 삭제 로직 강화
- 🔍 **삭제 디버깅 강화**: Apps Script에 상세 로그 및 디버깅 정보 추가
- 🛠️ **삭제 조건 완화**: STATUS 조건 제거로 삭제 처리 개선
- 🐛 **에러 처리 개선**: 상세한 오류 정보와 스택 트레이스 제공
- 📊 **FormData 로깅**: 프론트엔드에서 전송되는 데이터 상세 확인

### v3.2.6 (2025-09-17) - 시트 정렬 및 삭제 로직 개선
- 🔄 **시트 정렬 버튼 제거**: 일괄 등록 시에만 자동 정렬
- 🚮 **삭제 로직 개선**: 플레이어 삭제 처리 버그 수정
- 🛠️ **Apps Script 최적화**: sortSheet 이중 호출 버그 수정
- 🔍 **디버그 로그 통일**: 모든 콘솔 로그 v3.2.6으로 통일

### v3.2.5 (2025-09-17) - 정렬 기준 최적화
- 🎯 **정렬 기준 단순화**: Table(테이블명) > Seat(좌석번호) 순
- 📦 **테이블별 그룹핑**: 같은 테이블 플레이어들이 함께 표시
- 🔢 **좌석 순서 보장**: 좌석 번호순으로 정렬

### v3.2.4 (2025-09-17) - Google Sheets 자동 정렬
- 🔄 **시트 자동 정렬**: 일괄 등록 시 자동으로 시트 정렬
- 🆕 **정렬 버튼 추가**: 별도로 시트만 정렬 가능
- 📊 **Apps Script 업데이트**: sortTypeSheet 함수 추가

### v3.2.3 (2025-09-17) - 디버귵 및 안정성 개선
- 🔍 **디버귵 로그 개선**: 모든 로그를 v3.2.3으로 통일
- 🔄 **캐시 버스팅 강화**: 모든 JS 파일 버전 통일
- 🤝 **BatchProcessor 제거**: 일괄 등록 시 직접 서버 통신
- 📊 **Google Sheets 동기화 문제 분석**

### v3.2.2 (2025-09-17) - 성능 최적화
- 🚀 **삭제 로직 최적화**: 로컬 전용 삭제로 즉시 처리
- 🔄 **서버 동기화 개선**: 일괄 등록 시에만 서버 통신
- 💡 **UI 피드백 강화**: 미등록 변경사항 명확한 표시
- ⚡ **연속 삭제 성능**: 다수 삭제 작업 시 지연 없이 처리

### v3.2.1 (2025-09-17) - 버그 수정
- 🐛 **플레이어 삭제 로직 수정**: 관리 설정에서 플레이어 삭제 기능 복구
- 🔧 **함수 호출 순서 개선**: onManagementTableSelected 우선 호출
- ⚡ **이벤트 처리 최적화**: 인라인 onclick으로 삭제 버튼 직접 처리

### v3.2.0 (2025-09-17) - Phase 3: 모바일 최적화 완성
- ✅ **터치 인터페이스**: 44x44px 최소 크기, 터치 응답 시간 < 50ms
- ✅ **스와이프 제스처**: 오른쪽 스와이프로 실행취소
- ✅ **롱프레스 메뉴**: 컨텍스트 메뉴 시스템 (500ms 지연)
- ✅ **햅틱 피드백**: 진동 API로 터치 피드백 제공
- ✅ **가상 스크롤**: 1000개+ 리스트 성능 최적화
- ✅ **오프라인 저장소**: IndexedDB 기반 로컬 저장
- ✅ **자동 동기화**: 온라인 복구 시 자동 데이터 동기화
- ✅ **메모리 관리**: 성능 모니터링 및 자동 정리

### v3.1.0 (2025-01-17) - Phase 2: 기능별 즉시 실행
- ✅ **더블탭 시스템**: 위험한 작업 보호 (2초 타이머)
- ✅ **트랜잭션 배치**: 일괄 작업 원자성 보장
- ✅ **자동 롤백**: 실패 시 모든 작업 자동 복원
- ✅ **API 최적화**: 배치 호출로 성능 향상
- ✅ **타이머 관리**: 충돌 방지 시스템

### v3.0.0 (2025-01-17) - 모바일 최적화 Phase 1
- ✅ **confirm 팝업 제거**: 모든 작업 즉시 실행
- ✅ **ActionHistory 시스템**: 작업 이력 관리 및 실행취소
- ✅ **스낵바 UI**: 모바일 친화적 피드백 시스템
- ✅ **메모리 최적화**: 히스토리 20개 제한, WeakMap 사용
- ✅ **빠른 응답**: 모든 작업 200ms 이내 완료

### v2.29.0 (2025-09-16)
- 10개 시트 고정 플레이어 관리 시스템
- 스트릿 선택 시 자동으로 액션 패드 열기
- 포커 포지션 순서대로 자동 플레이어 진행

## 🚀 빠른 시작

### 1. Google Sheets 설정
```bash
1. 템플릿 시트 복사
2. Apps Script 열기 (확장 프로그램 → Apps Script)
3. Code_v63_InOut.gs 붙여넣기
4. 웹 앱으로 배포
```

### 2. 프론트엔드 설정
```javascript
// 설정(⚙️) 메뉴에서 Apps Script URL 입력
// 또는 index.html에서 직접 설정
const APPS_SCRIPT_URL = 'YOUR_DEPLOYMENT_URL';
```

### 3. 실행
```bash
# Live Server 또는
python -m http.server 8000
```

## 🛠 기술 스택

- **Frontend**: Vanilla JavaScript, Tailwind CSS
- **Backend**: Google Apps Script v71.0.3
- **Database**: Google Sheets
- **API**: Gemini Vision API (칩 분석)

## 📁 프로젝트 구조

```
virtual_data_claude/
├── 📄 index.html                    # 메인 애플리케이션 (320KB+)
├── 🖥️ server.js                     # 로컬 개발 서버 (Node.js)
├── 🛡️ phase4-functions.js           # API 보호 및 에러 처리 시스템
├── 📦 package.json                  # Node.js 의존성 관리
├── 📋 README.md                     # 메인 프로젝트 문서
├── ⚙️ _config.yml                   # GitHub Pages 설정
├── 🚫 .gitignore                    # Git 제외 파일 설정
├── 📝 .nojekyll                     # GitHub Pages Jekyll 비활성화
│
├── 📚 docs/                         # 📖 프로젝트 문서들
│   ├── ANALYSIS_REPORT.md           # 프로젝트 분석 보고서
│   ├── APPS_SCRIPT_DEPLOYMENT_GUIDE.md  # Apps Script 배포 가이드
│   ├── APPS_SCRIPT_FLOW_ANALYSIS.md     # Apps Script 플로우 분석
│   ├── CHECKLIST.md                 # 개발 체크리스트
│   ├── LOAD_INITIAL_DESIGN_ANALYSIS.md  # 초기 설계 분석
│   ├── MIGRATION_PLAN.md            # 마이그레이션 계획
│   ├── RUNTIME_ERROR_ANALYSIS.md    # 런타임 에러 분석
│   └── virtual_data_master_plan.md  # 마스터 플랜
│
├── 💻 src/                          # 🔧 소스 코드 모듈들
│   └── js/                          # JavaScript 모듈들
│       ├── action-order-manager-v2.js      # 액션 순서 관리 V2
│       ├── duplicate-remover.js            # 중복 플레이어 제거
│       ├── event-manager.js                # 이벤트 관리자
│       ├── modal-auto-close.js             # 모달 자동 닫기
│       ├── unified-event-handler.js        # 통합 이벤트 핸들러
│       └── action-order-integration-guide.md  # 통합 가이드
│
├── ⚙️ apps-script/                  # 🔧 Google Apps Script 백엔드
│   └── Code_v71.0.3.gs              # 백엔드 API 서버 (Google Apps Script)
│
├── 📦 archive/                      # 🗃️ 백업 및 아카이브 파일들
│   ├── index_v2_manual_init.html    # 수동 초기화 버전
│   ├── index_v3_smart_init.html     # 스마트 초기화 버전
│   ├── minimal_index.html           # 최소 버전
│   ├── action-history.js            # Phase 1: 액션 히스토리 시스템
│   ├── batch-processor.js           # Phase 2: 배치 처리 시스템
│   ├── mobile-optimizer.js          # Phase 3: 모바일 최적화
│   ├── offline-storage.js           # Phase 3: 오프라인 저장소
│   ├── virtual-scroll.js            # Phase 3: 가상 스크롤
│   ├── double-tap-handler.js        # Phase 2: 더블탭 핸들러
│   ├── chip-analysis-module.js      # 칩 분석 모듈
│   ├── table-management-v59.js      # 테이블 관리 V59
│   └── old-tests/                   # 이전 테스트 파일들
│
├── 💾 backups/                     # 🔙 자동 백업 파일들
│   └── 20250923/                   # 날짜별 백업
│
└── 📂 .github/                     # 🔧 GitHub 설정 및 워크플로우
    └── workflows/                  # GitHub Actions
```

## 📊 Google Sheets 구조

### Type 시트 (플레이어 관리)
| 열 | 필드 | 설명 |
|---|---|---|
| A | Camera Preset | 카메라 프리셋 |
| B | Player | 플레이어 이름 |
| C | Table | 테이블 이름 |
| D | Notable | 주목할 플레이어 |
| E | Chips | 현재 칩 |
| F | UpdatedAt | 업데이트 시간 |
| G | Seat | 좌석 번호 |
| H | Status | IN/OUT 상태 |
| I | pic | 프로필 사진 |
| J | Country | 국가 |
| K | CountryVerified | 국가 확인 여부 |

### Index 시트 (핸드 메타데이터)
| 열 | 필드 | 설명 |
|---|---|---|
| A | handNumber | 핸드 번호 |
| B | startRow | Hand 시트 시작 행 |
| C | endRow | Hand 시트 종료 행 |
| D | handUpdatedAt | 핸드 업데이트 시간 |
| E-F | handEdit | 편집 정보 |
| G | label | 게임 레이블 |
| H | table | 테이블 이름 |
| I | tableUpdatedAt | 테이블 업데이트 시간 |
| J-N | Camera | 카메라 정보 |
| O-Q | Street/Action | 마지막 스트리트/액션 |
| R | winners | 승자 정보 |

### Hand 시트 (상세 기록)
| 열 | 필드 | 설명 |
|---|---|---|
| A | 행번호 | 순번 |
| B | 타입 | HAND/PLAYER/EVENT |
| C | 데이터 | 플레이어명/액션 |
| D | 좌석 | 좌석 번호 |
| E | 0 | 고정값 |
| F | 시작칩 | 시작 칩 |
| G | 종료칩 | 종료 칩 |
| H | 카드 | 핸드 카드 |
| I | 포지션 | BTN/SB/BB |

## 🔄 최근 업데이트

### v2.26.2 (2025-09-16)
- ⚡ **사용자 경험 개선**
  - 숫자 입력(키패드) 오류 수정: 베팅/레이즈 시 키패드 정상 작동
  - 스트릿 선택 시 바로 액션 패드 열기: 액션 버튼 클릭 없이 스트릿만 선택하면 즉시 액션 입력 가능
  - actionPadCurrentAction 설정 로직 추가로 베팅/레이즈 구분 정상 작동

### v2.26.1 (2025-09-16)
- 🔧 **버그 수정**
  - updateSmartCheckCallButton 함수 정의 오류 수정
  - addActionToLog 함수 null 체크 오류 수정
  - 액션 패드 시스템 안정성 개선

### v2.26.0 (2025-09-16)
- 🚀 **포지션 기반 액션 순서 시스템 구현**
  - 포커 규칙에 따른 자동 액션 순서 계산 (프리플랍: UTG→BTN→SB→BB, 포스트플랍: SB→BB→UTG→BTN)
  - 🤖 자동 모드: 액션 순서에 따라 자동으로 다음 플레이어 활성화
  - 👆 수동 모드: 사용자가 직접 플레이어 선택하여 액션 입력
  - 액션 큐 시각화: 현재 차례(🎯), 완료(✅), 대기(⏳) 상태 표시
  - 스마트 스트릿 진행: 베팅 라운드 완료 시 자동으로 다음 스트릿 활성화
  - 플레이어 스킵 기능: 특정 플레이어 건너뛰기 가능
  - 액션 모드 실시간 전환: 언제든지 자동/수동 모드 변경 가능

### v2.25.3 (2025-09-16)
- 🎯 **테이블 선택 워크플로우 최적화**
  - 관리 버튼에서 "📋 테이블 관리" → "🎯 테이블 선택"으로 변경
  - 중간 테이블 선택 단계 제거로 직관적인 사용자 경험 제공
  - 테이블 선택 후 바로 플레이어 관리 화면 표시
  - 선택된 테이블 정보 항상 표시 + "변경" 버튼으로 재선택 가능
  - 메인 대시보드와 동일한 테이블 선택 로직 사용

### v2.25.2 (2025-09-16)
- 🔧 **SB/BB 표시 버그 수정**
  - SB/BB 버튼에서 "SB:", "BB:" 텍스트 라벨 제거
  - 실제 수치만 표시하도록 개선 (예: "100" 대신 "SB: 100")
  - data-purpose 속성 추가로 버튼 업데이트 로직 수정
  - 초기화 시 저장된 SB/BB 값 정상 표시
  - updateBlindButtons() 함수로 버튼 상태 관리 통합

### v2.25.1 (2025-09-16)
- 🚀 **테이블 관리 워크플로우 단축**
  - 테이블 관리 버튼 클릭 시 바로 테이블 선택 모달 실행
  - 중간 단계 제거로 더욱 직관적인 사용자 경험
  - 테이블 관리 모드 플래그로 모드 구분 처리
  - 선택 후 자동으로 플레이어 관리 화면으로 전환

### v2.25.0 (2025-09-16)
- 🔧 **테이블 선택 시스템 통합**
  - 관리 모달과 메인 대시보드 테이블 선택 로직 통합
  - 관리 모달에서도 즉시 테이블 선택 가능 (로딩 과정 제거)
  - 테이블 선택 모달을 공유하여 일관된 사용자 경험 제공
  - 기존 "📋 테이블 호출" 버튼을 "🎯 테이블 선택" 버튼으로 교체
  - 메인 대시보드의 테이블 선택 시 관리 모달 자동 연동

### v2.24.0 (2025-09-16)
- 🔧 **중요 버그 수정**
  - 프론트엔드 IN/OUT 상태 필터링 추가
  - 삭제된 플레이어(OUT 상태) 표시 방지
  - H열(Status) 값이 비어있으면 IN으로 기본 처리
  - buildTypeFromCsv 함수에 상세 로깅 추가
  - Apps Script와 프론트엔드 데이터 일관성 확보

### v2.23.0 (2025-09-16)
- 🔍 **디버깅 및 오류 추적 강화**
  - loadTypeSheet 미정의 함수 오류 완전 수정
  - 일괄 등록 과정 상세 로깅 추가
  - 단계별 오류 추적 및 분석 시스템
  - 네트워크, JSON 파싱, Apps Script 오류 별도 처리
  - CSV 데이터 로드 과정 모니터링

### v2.22.0 (2025-09-16)
- 📖 **사용자 가이드**
  - Apps Script 재배포 안내 메시지 추가
  - "Unknown action: batchUpdate" 오류 해결 방법 제공
  - 단계별 재배포 순서 안내
  - 친절한 에러 메시지로 사용자 혼란 최소화

### v2.21.0 (2025-09-16)
- 🎨 **UI/UX 개선**
  - Apps Script URL 저장 시 시각적 피드백 강화
  - 현재 저장된 URL 명확하게 표시 (노란색/녹색 구분)
  - 저장 성공 시 버튼 상태 변경 및 메시지 표시
  - 입력 필드 플레이스홀더 동적 업데이트
  - 중복 URL 입력 방지 및 안내 메시지

### v2.20.0 (2025-09-16)
- 🔧 **버그 수정**
  - Apps Script URL 저장 버튼 이벤트 리스너 문제 해결
  - setTimeout으로 DOM 로드 보장
  - 디버깅 콘솔 로그 추가
  - 테스트 파일 제공 (test-url-save.html)

### v2.19.0 (2025-09-16)
- 🔧 **버그 수정**
  - Apps Script FormData 파싱 문제 해결
  - batchUpdate 액션 "Unknown action" 오류 수정
  - e.parameter 직접 접근 방식으로 변경
  - 구버전 payload 방식과 호환성 유지

### v2.18.0 (2025-09-16)
- 🎨 **UI 개선**
  - 관리 모달에 Apps Script URL 설정 추가
  - 재배포 시 Apps Script URL을 직접 관리 모달에서 변경 가능
  - 설정 모달과 별도로 관리 모달에서도 URL 설정 가능
- 🔧 **버그 수정**
  - batchUpdate 액션이 이미 Apps Script에 구현되어 있음을 확인
  - 일괄 등록 기능 정상 작동

### v2.17.0 (2025-09-16)
- 🔧 **버그 수정**
  - parseTypeData 함수 미정의 오류 수정
  - buildTypeFromCsv 함수로 올바르게 변경
  - 테이블 로드 기능 정상 작동

### v2.16.0 (2025-09-16)
- 🔧 **버그 수정**
  - loadTypeSheet 함수 미정의 오류 수정
  - 직접 CSV 페칭 방식으로 변경하여 안정성 개선
- 🎨 **UI 개선**
  - "관리" 버튼 유지 및 관리 메뉴 구조 개선
  - 테이블 관리를 위한 별도 버튼 설계
  - 향후 칩/플레이어 수정 기능 추가를 위한 기반 마련

### v2.15.0 (2025-09-16)
- 📋 **테이블 관리 UI 단순화**
  - 관리 버튼을 "테이블" 버튼으로 변경
  - 플레이어/칩 탭 제거, 테이블 관리에만 집중
  - 테이블 호출 → 선택 → 플레이어 관리 워크플로우
  - 일괄 등록 시스템으로 효율성 개선

### v2.14.0 (2025-09-16)
- 🎮 **플레이어 관리 기능 강화**
  - 관리 버튼에서 플레이어 추가/삭제 가능
  - 실시간 좌석 번호 변경 기능
  - 칩 수량 직접 수정 가능
  - Google Sheets와 실시간 동기화
  - 테이블별 플레이어 관리 UI 개선

### v2.13.0 (2025-09-15)
- 🚀 **자동 액션 매핑 시스템 구현**
  - 플레이어 선택 없이 액션만 순서대로 입력 가능
  - 포커 규칙에 따른 자동 플레이어 매핑
  - 프리플랍/포스트플랍 액션 순서 자동 계산
  - 설정에서 자동/수동 모드 전환 가능
  - 현재 차례 플레이어 실시간 표시
  - 퀵 액션 버튼 추가 (스마트 콜, 올인, 벳/레이즈)

### v2.12.0 (2025-09-15)
- ⚙️ **설정 기능 추가**
  - Apps Script URL을 대시보드에서 직접 변경 가능
  - localStorage에 자동 저장되어 재배포 시 편리
  - 칩 스택 검증 ON/OFF 설정 가능
  - 설정 모달에서 버전 정보 확인 가능

### v2.11.0 (2025-09-15)
- 🎯 **포지션 정보 Google Sheets 기록 추가**
  - PLAYER 행의 I열에 포지션 정보(BTN/SB/BB) 추가
  - getPositionsForSeat 함수를 활용하여 자동 계산
  - 여러 포지션을 가진 경우 쉼표로 구분하여 저장

## 💡 사용 팁

### 자동 액션 매핑 모드 사용법
1. 설정(⚙️) → "자동 액션 매핑 모드" 활성화
2. 버튼 위치 설정
3. 플레이어 선택 없이 액션만 순서대로 입력
4. 시스템이 자동으로 올바른 플레이어에게 매핑

### 칩 분석 기능
1. 관리 버튼 → 칩 컬러 탭
2. 칩 컬러 등록 (최대 5개)
3. 카메라로 칩 스택 촬영
4. AI가 자동으로 칩 개수 분석

### 효율적인 핸드 기록
- Smart 모드 활성화로 자동 스트리트 진행
- 키보드 단축키 활용 (ESC: 닫기, Enter: 확인)
- 버튼 위치 설정으로 액션 순서 자동 계산

## 🔧 개발 가이드

### Apps Script 배포
1. [Google Apps Script](https://script.google.com) 접속
2. 새 프로젝트 생성
3. `apps-script/Code_v71.0.3.gs` 내용 붙여넣기
4. 스프레드시트 ID 설정
5. 웹 앱으로 배포 (액세스: 모든 사용자)

### 로컬 개발
```bash
# 저장소 클론
git clone https://github.com/garimto81/virtual_data_claude.git
cd virtual_data_claude

# 의존성 설치 (Node.js 서버 사용 시)
npm install

# 로컬 서버 실행 (Node.js)
node server.js  # http://localhost:8080

# 또는 Python 서버
python -m http.server 8000  # http://localhost:8000
```


## ⚠️ 주의사항

1. **권한 설정**: 웹 앱 배포 시 "모든 사용자" 액세스 허용
2. **CORS**: form-urlencoded 방식으로 전송하여 CORS 문제 회피
3. **시트 이름**: Hand, Index, Type 시트 이름 변경 금지
4. **API 제한**: Google Apps Script 일일 실행 시간 제한 고려
5. **브라우저 캐시**: 업데이트 후 Ctrl+Shift+R로 강제 새로고침

## 📧 문의

문제가 있거나 개선 사항이 있으면 [Issue](https://github.com/garimto81/virtual_data_claude/issues)를 등록해주세요.

---

© 2025 Virtual Data - Poker Hand Logger. All rights reserved.## 📚 프로젝트 문서

### 문서 구조 (3개 핵심 문서)
```
📁 docs/                           # 📖 프로젝트 문서 센터
├── 📋 PRD.md                       # Product Requirements Document
├── 🏗️ TECHNICAL_DESIGN.md          # Low Level Design (기술 설계)
└── 🔌 API_REFERENCE.md             # API 레퍼런스 및 개발 가이드

📁 src/js/                         # JavaScript 모듈
📁 apps-script/                    # Google Apps Script 백엔드
📁 archive/                        # 백업 및 아카이브 파일
📁 backups/                        # 자동 백업 파일
```

### 핵심 문서 가이드

#### 📋 [PRD.md](docs/PRD.md) - 제품 요구사항 문서
- **대상**: 프로덕트 매니저, 기획자, 비즈니스 담당자
- **내용**: 제품 비전, 핵심 기능, 사용자 스토리, 성공 지표, 로드맵
- **용도**: 제품 방향성 이해, 기능 우선순위 파악, 진행 상황 추적

#### 🏗️ [TECHNICAL_DESIGN.md](docs/TECHNICAL_DESIGN.md) - 기술 설계 문서
- **대상**: 개발자, 아키텍트, 기술 리더
- **내용**: 시스템 아키텍처, 데이터 모델, 핵심 알고리즘, 성능 최적화 전략
- **용도**: 구현 방법 이해, 아키텍처 설계, 코드 작성 가이드

#### 🔌 [API_REFERENCE.md](docs/API_REFERENCE.md) - API 레퍼런스
- **대상**: API 사용자, 프론트엔드 개발자, 통합 담당자
- **내용**: 전체 API 엔드포인트, 요청/응답 형식, 에러 코드, 사용 예제
- **용도**: API 호출 방법, 통합 구현, 디버깅

> **문서 관리 원칙**: 향후 모든 업데이트는 위 3개 문서에만 반영하며, 추가 문서를 생성하지 않습니다.


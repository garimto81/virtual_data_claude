<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>JavaScript Error Debug</title>
</head>
<body>
    <h1>JavaScript Error Debug</h1>
    <div id="error-log"></div>

    <script>
        // 에러 수집
        const errors = [];

        window.addEventListener('error', function(event) {
            const error = {
                message: event.message,
                filename: event.filename,
                line: event.lineno,
                column: event.colno,
                stack: event.error ? event.error.stack : 'No stack trace'
            };

            errors.push(error);

            console.error('JavaScript Error:', error);
            updateErrorLog();
        });

        function updateErrorLog() {
            const logDiv = document.getElementById('error-log');
            logDiv.innerHTML = '<h2>Captured Errors:</h2>' +
                errors.map((err, index) => `
                    <div style="margin: 10px 0; padding: 10px; border: 1px solid red; background: #ffeeee;">
                        <h3>Error ${index + 1}:</h3>
                        <p><strong>Message:</strong> ${err.message}</p>
                        <p><strong>File:</strong> ${err.filename}</p>
                        <p><strong>Line:</strong> ${err.line}, Column: ${err.column}</p>
                        <pre>${err.stack}</pre>
                    </div>
                `).join('');
        }

        // 메인 index.html 페이지를 iframe으로 로드
        setTimeout(() => {
            const iframe = document.createElement('iframe');
            iframe.src = 'index.html';
            iframe.style.width = '1px';
            iframe.style.height = '1px';
            iframe.style.border = 'none';
            iframe.style.position = 'absolute';
            iframe.style.left = '-9999px';

            iframe.onerror = function(event) {
                console.error('Iframe error:', event);
            };

            document.body.appendChild(iframe);

            setTimeout(() => {
                if (errors.length === 0) {
                    document.getElementById('error-log').innerHTML = '<p style="color: green;">No JavaScript errors detected!</p>';
                }
            }, 5000);
        }, 1000);
    </script>
</body>
</html>